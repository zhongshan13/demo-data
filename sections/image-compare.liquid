{%- comment -%}
------------------------------------------------------------------------------
	Section: Image compare
------------------------------------------------------------------------------
{%- endcomment -%}

{%- style -%}
	#shopify-section-{{- section.id -}} {
		padding-top: {{- section.settings.offset_top_mobile -}}px;
		padding-bottom: {{- section.settings.offset_bottom_mobile -}}px;
	}

	@media screen and (min-width: 768px) {
		#shopify-section-{{- section.id -}} {
			padding-top: {{- section.settings.offset_top_desktop -}}px;
			padding-bottom: {{- section.settings.offset_bottom_desktop -}}px;
		}
	}
{%- endstyle -%}

{% assign label 					= section.settings.label %}
{% assign heading 					= section.settings.heading %}
{% assign text 						= section.settings.text %}
{% assign desktop_image_height 		= section.settings.desktop_image_height %}
{% assign mobile_image_height 		= section.settings.mobile_image_height %}
{% assign first_image 				= section.settings.first_image %}
{% assign second_image 				= section.settings.second_image %}
{% assign full_width 				= section.settings.full_width %}
{% assign drag_cursor_color 		= section.settings.drag_cursor_color %}
{% assign drag_cursor_background 	= section.settings.drag_cursor_background %}
{% assign design 					= settings.design %}

{% capture styles %}
	--drag_cursor_color: {{ drag_cursor_color }};
	--drag_cursor_background: {{ drag_cursor_background }};
	--desktop_image_height: {{ desktop_image_height }};
	--mobile_image_height: {{ mobile_image_height }};
{% endcapture %}

{%- capture first_image_focal -%}
	--first-img-pos: {{ first_image.presentation.focal_point }};
{%- endcapture -%}

{%- capture second_image_focal -%}
	--second-img-pos: {{ second_image.presentation.focal_point }};
{%- endcapture -%}

{% capture image_compare %}
	{% if label != blank or heading != blank or text != blank %}
		<div class="image-compare__header">
			{% if label != blank %}
				<div class="image-compare__label">
					{{ label }}
				</div>
			{% endif %}

			{% if heading != blank %}
				<h2 class="h2 image-compare__heading">
					{{ heading }}
				</h2>
			{% endif %}

			{% if text != blank %}
				<div class="image-compare__rte section-rte">
					{{ text }}
				</div>
			{% endif %}
		</div>
	{% endif %}

	<img-comparison-slider tabindex="0" style="{{ styles }}">
		{% if first_image != blank %}
			<img slot="first"
				 srcset="{{ first_image | img_url: "1920x" }} 1x , {{ first_image | img_url: "3840x" }} 2x"
				 alt="{{ first_image.alt }}"
				 style="{{ first_image_focal }}"
				 class="image-compare__image image-compare__image--first"
				 loading="lazy"
			>
		{% else %}
			<div slot="first" class="image-compare__placeholder">
				{{- 'lifestyle-2' | placeholder_svg_tag: 'image-compare__svg' -}}
			</div>
		{% endif %}

		{% if second_image != blank %}
			<img slot="second"
				 srcset="{{ second_image | img_url: "1920x" }} 1x , {{ second_image | img_url: "3840x" }} 2x"
				 alt="{{ first_image.alt }}"
				 style="{{ second_image_focal }}"
				 class="image-compare__image image-compare__image--second"
				 loading="lazy"
			>
		{% else %}
			<div slot="second" class="image-compare__placeholder">
				{{- 'lifestyle-2' | placeholder_svg_tag: 'image-compare__svg image-compare__svg--black' -}}
			</div>
		{% endif %}

		<div slot="handle" class="image-compare__handle">
			{% render "icons-small", icon: "arrow-down" %}
			{% render "icons-small", icon: "arrow-down" %}
		</div>
	</img-comparison-slider>
{% endcapture %}

{% if design == "alternate" %}
	{% render "image-compare-new", section: section %}
{% else %}
	{{- 'image-compare.build.css' | asset_url | stylesheet_tag -}}

	<section
		class="image-compare"
		data-section-id="{{- section.id -}}"
		data-section-type="image-compare"
	>
		<div {% if full_width == false %} class="image-compare__container"{% endif %}>
			{{- image_compare -}}
		</div>
	</section>
{% endif %}

<script src="{{- 'section-image-compare.build.min.js' | asset_url -}}" defer></script>

{%- schema -%}
{
   "name":"Image compare",
   "disabled_on":{
      "groups":[
         "header",
         "footer"
      ]
   },
   "settings":[
	   {
		   "type": "text",
		   "id": "label",
		   "label": "Label"
	   },
	   {
         "type":"text",
         "id":"heading",
         "label":"Heading",
         "default":"Heading"
      },
      {
         "type":"richtext",
         "id":"text",
         "label":"Text",
         "default":"<p>Text that describe content</p>"
      },
      {
         "type":"select",
         "id":"desktop_image_height",
         "label":"Desktop image height",
         "options":[
            {
               "value":"200px",
               "label":"200px"
            },
            {
               "value":"250px",
               "label":"250px"
            },
            {
               "value":"300px",
               "label":"300px"
            },
            {
               "value":"350px",
               "label":"350px"
            },
            {
               "value":"400px",
               "label":"400px"
            },
            {
               "value":"450px",
               "label":"450px"
            },
            {
               "value":"500px",
               "label":"500px"
            },
            {
               "value":"550px",
               "label":"550px"
            },
            {
               "value":"600px",
               "label":"600px"
            },
            {
               "value":"650px",
               "label":"650px"
            },
            {
               "value":"700px",
               "label":"700px"
            },
            {
               "value":"750px",
               "label":"750px"
            },
            {
               "value":"800px",
               "label":"800px"
            },
			{
               "value":"100%",
               "label":"Fullsize"
			}
         ],
         "default":"600px"
      },
	  {
         "type":"select",
         "id":"mobile_image_height",
         "label":"Mobile image height",
         "options":[
            {
               "value":"200px",
               "label":"200px"
            },
            {
               "value":"250px",
               "label":"250px"
            },
            {
               "value":"300px",
               "label":"300px"
            },
            {
               "value":"350px",
               "label":"350px"
            },
            {
               "value":"400px",
               "label":"400px"
            },
            {
               "value":"450px",
               "label":"450px"
            },
            {
               "value":"500px",
               "label":"500px"
            },
            {
               "value":"550px",
               "label":"550px"
            },
            {
               "value":"600px",
               "label":"600px"
            },
            {
               "value":"650px",
               "label":"650px"
            },
            {
               "value":"700px",
               "label":"700px"
            },
            {
               "value":"750px",
               "label":"750px"
            },
            {
               "value":"800px",
               "label":"800px"
            },
		    {
               "value":"100%",
               "label":"Fullsize"
            }
         ],
         "default":"400px"
      },
      {
         "type":"image_picker",
         "id":"first_image",
         "label":"First image",
	      "info": "3840 x 2160px recommended"
      },
      {
         "type":"image_picker",
         "id":"second_image",
         "label":"Second image",
         "info":"Use an image with the same dimensions as the first image. 3840 x 2160px recommended"
      },
      {
         "type":"header",
         "content":"Layout"
      },
      {
         "type":"checkbox",
         "id":"full_width",
         "label":"Make full width",
         "default":true,
         "info":"If unchecked - container width will be set based on the group 'Layout' settings in the Theme settings."
      },
      {
         "type":"range",
         "id":"offset_top_desktop",
         "min":0,
         "max":100,
         "step":1,
         "unit":"px",
         "label":"Desktop offset top",
         "default":60
      },
      {
         "type":"range",
         "id":"offset_bottom_desktop",
         "min":0,
         "max":100,
         "step":1,
         "unit":"px",
         "label":"Desktop offset bottom",
         "default":0
      },
      {
         "type":"range",
         "id":"offset_top_mobile",
         "min":0,
         "max":100,
         "step":1,
         "unit":"px",
         "label":"Mobile offset top",
         "default":40
      },
      {
         "type":"range",
         "id":"offset_bottom_mobile",
         "min":0,
         "max":100,
         "step":1,
         "unit":"px",
         "label":"Mobile offset bottom",
         "default":0
      },
      {
         "type":"header",
         "content":"Colors"
      },
      {
         "type":"color",
         "id":"drag_cursor_background",
         "label":"Drag cursor background",
         "default":"#000000"
      },
      {
         "type":"color",
         "id":"drag_cursor_color",
         "label":"Drag cursor color",
         "default":"#ffffff"
      }
   ],
   "presets":[
      {
         "name":"Image compare"
      }
   ]
}
{%- endschema -%}
