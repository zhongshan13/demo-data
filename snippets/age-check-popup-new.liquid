{% assign age_check_cookie_time = settings.age_check_time %}
{% assign title 				= settings.age_check_title %}
{% assign text 					= settings.age_check_text %}
{% assign button_label 			= settings.age_check_button_label | default: "Yes" %}
{% assign button_close_label 	= settings.age_check_button_close_label %}
{% assign redirect_url 			= settings.age_check_redirect_url | default: "https://google.com" %}
{% assign image_desktop 		= settings.age_check_image_desktop %}
{% assign image_mobile 			= settings.age_check_image_mobile | default: image_desktop %}
{% assign hide_image_on_mobile 	= settings.age_check_hide_mobile_img %}

{{ 'age-check-popup-new.build.css' | asset_url | stylesheet_tag }}
<script src="{{- 'section-age-check-popup.build.min.js' | asset_url -}}" defer></script>

<div id="age-check-popup"
	 class="age-check-popup-new"
	 data-cookie-time="{{ age_check_cookie_time }}"
	 data-redirect-url="{{ redirect_url }}"
	 role="dialog"
	{% if title != blank %}
		aria-labelledby="age-check-popup-title"
	{% endif %}
>
	<div class="age-check-popup-new__container {% if image_desktop == blank %}age-check-popup-new__container--no-image{% endif %}">
		{% if image_desktop != blank %}
			{%- capture img_focal -%}
				--img-desktop-pos: {{ image_desktop.presentation.focal_point }}; --img-mob-pos: {{ image_mobile.presentation.focal_point }};
			{%- endcapture -%}

			<div class="age-check-popup-new__col age-check-popup-new__col--image {% if hide_image_on_mobile %}age-check-popup-new__col--hide-img-mob{% endif %}">
				{%- liquid
					comment
						coeficient = need_height / need_width
					endcomment
					assign desktop_coeficient = 1.552238806
					assign tablet_coeficient = 1.4566929134
					assign mobile_coeficient = tablet_coeficient
					assign image_crop = 'center'

					assign width_mobile = 254
					assign width_mobile_landscape = 359
					assign width_small_tablet_portrait = 391
					assign width_extra_small = 391
					assign width_small = 345
					assign width_medium = 415
					assign width_large = 335
					assign width_extra_large = 335
					assign width_default = 335

					assign height_mobile = width_mobile | times: mobile_coeficient | ceil
					assign height_mobile_landscape = width_mobile_landscape | times: mobile_coeficient | ceil
					assign height_small_tablet_portrait = width_small_tablet_portrait | times: mobile_coeficient | ceil
					assign height_extra_small = width_extra_small | times: mobile_coeficient | ceil
					assign height_small = width_small | times: tablet_coeficient | ceil
					assign height_medium = width_medium | times: tablet_coeficient | ceil
					assign height_large = width_large | times: desktop_coeficient | ceil
					assign height_extra_large = width_extra_large | times: desktop_coeficient | ceil
					assign height_default = width_default | times: desktop_coeficient | ceil

					assign width_mobile_x2 = width_mobile | times: 2
					assign width_mobile_landscape_x2 = width_mobile_landscape | times: 2
					assign width_small_tablet_portrait_x2 = width_small_tablet_portrait | times: 2
					assign width_extra_small_x2 = width_extra_small | times: 2
					assign width_small_x2 = width_small | times: 2
					assign width_extra_large_x2 = width_extra_large | times: 2
					assign width_large_x2 = width_large | times: 2
					assign width_medium_x2 = width_medium | times: 2
					assign width_default_x2 = width_default | times: 2

					assign height_mobile_x2 = height_mobile | times: 2
					assign height_mobile_landscape_x2 = height_mobile_landscape | times: 2
					assign height_small_tablet_portrait_x2 = height_small_tablet_portrait | times: 2
					assign height_extra_small_x2 = height_extra_small | times: 2
					assign height_small_x2 = height_small | times: 2
					assign height_extra_large_x2 = width_extra_large | times: 2
					assign height_large_x2 = width_large | times: 2
					assign height_medium_x2 = width_medium | times: 2
					assign height_default_x2 = height_default | times: 2
				-%}

				<picture class="age-check-popup-new__image-wrapper lazy">
					<source
						data-srcset="{{ image_mobile | image_url: width: width_mobile, height: height_mobile, crop: image_crop }} 1x, {{ image_mobile | image_url: width: width_mobile_x2, height: height_mobile_x2, crop: image_crop }} 2x"
						srcset="{{ image_mobile | image_url: width: 10 }} 1x, {{ image_mobile | image_url: width: 20 }} 2x"
						media="(max-width: 380px)"
						width="{{ width_mobile }}"
						height="{{ height_mobile }}"
					/>
					<source
						data-srcset="{{ image_mobile | image_url: width: width_mobile_landscape, height: height_mobile_landscape, crop: image_crop }} 1x, {{ image_mobile | image_url: width: width_mobile_landscape_x2, height: height_mobile_landscape_x2, crop: image_crop }} 2x"
						srcset="{{ image_mobile | image_url: width: 10 }} 1x, {{ image_mobile | image_url: width: 20 }} 2x"
						media="(max-width: 480px)"
						width="{{ width_mobile_landscape }}"
						height="{{ height_mobile_landscape }}"
					/>
					<source
						data-srcset="{{ image_mobile | image_url: width: width_small_tablet_portrait, height: height_small_tablet_portrait, crop: image_crop }} 1x, {{ image_mobile | image_url: width: width_small_tablet_portrait_x2, height: height_small_tablet_portrait_x2, crop: image_crop }} 2x"
						srcset="{{ image_mobile | image_url: width: 10 }} 1x, {{ image_mobile | image_url: width: 20 }} 2x"
						media="(max-width: 575px)"
						width="{{ width_small_tablet_portrait }}"
						height="{{ height_small_tablet_portrait }}"
					/>
					<source
						data-srcset="{{ image_mobile | image_url: width: width_extra_small, height: height_extra_small, crop: image_crop }} 1x, {{ image_mobile | image_url: width: width_extra_small_x2, height: height_extra_small_x2, crop: image_crop }} 2x"
						srcset="{{ image_mobile | image_url: width: 10 }} 1x, {{ image_mobile | image_url: width: 20 }} 2x"
						media="(max-width: 767px)"
						width="{{ width_extra_small }}"
						height="{{ height_extra_small }}"
					/>
					<source
						data-srcset="{{ image_desktop | image_url: width: width_small, height: height_small, crop: image_crop }} 1x, {{ image_desktop | image_url: width: width_small_x2, height: height_small_x2, crop: image_crop }} 2x"
						srcset="{{ image_desktop | image_url: width: 10 }} 1x, {{ image_desktop | image_url: width: 20 }} 2x"
						media="(max-width: 991px)"
						width="{{ width_small }}"
						height="{{ height_small }}"
					/>
					<source
						data-srcset="{{ image_desktop | image_url: width: width_medium, height: height_medium, crop: image_crop }} 1x, {{ image_desktop | image_url: width: width_medium_x2, height: height_medium_x2, crop: image_crop }} 2x"
						srcset="{{ image_desktop | image_url: width: 10 }} 1x, {{ image_desktop | image_url: width: 20 }} 2x"
						media="(max-width: 1199px)"
						width="{{ width_medium }}"
						height="{{ height_medium }}"
					/>
					<source
						data-srcset="{{ image_desktop | image_url: width: width_large, height: height_large, crop: image_crop }} 1x, {{ image_desktop | image_url: width: width_large_x2, height: height_large_x2, crop: image_crop }} 2x"
						srcset="{{ image_desktop | image_url: width: 10 }} 1x, {{ image_desktop | image_url: width: 20 }} 2x"
						media="(max-width: 1500px)"
						width="{{ width_large }}"
						height="{{ height_large }}"
					/>
					<source
						data-srcset="{{ image_desktop | image_url: width: width_extra_large, height: height_extra_large, crop: image_crop }} 1x, {{ image_desktop | image_url: width: width_extra_large_x2, height: height_extra_large_x2, crop: image_crop }} 2x"
						srcset="{{ image_desktop | image_url: width: 10 }} 1x, {{ image_desktop | image_url: width: 20 }} 2x"
						media="(max-width: 1700px)"
						width="{{ width_extra_large }}"
						height="{{ height_extra_large }}"
					/>

					<img
						class="age-check-popup-new__image"
						srcset="{{ image_desktop | image_url: width: 10 }} 1x, {{ image_mobile | image_url: width: 20 }} 2x"
						data-srcset="{{ image_desktop | image_url: width: width_default, height: height_default, crop: image_crop }} 1x, {{ image_desktop | image_url: width: width_default_x2, height: height_default_x2, crop: image_crop }} 2x"
						src="{{ image_desktop | image_url: width: 10 }}"
						data-src="{{- image_desktop | image_url: width: width_default, height: height_default, crop: image_crop -}}"
						alt="{{- image_desktop.alt -}}"
						width="{{ width_default }}"
						height="{{ height_default }}"
						style="{{ img_focal }}"
					/>
				</picture>
			</div>
		{% endif %}


		<div class="age-check-popup-new__col age-check-popup-new__col--content">
			<div class="age-check-popup-new__content">
				{% if title != blank %}
					<h2 id="age-check-popup-title" class="age-check-popup-new__title h4">{{ title }}</h2>
				{% endif %}

				{% if text != blank %}
					<p class="age-check-popup-new__text">{{ text }}</p>
				{% endif %}

				{% if button_label != blank %}
					<div class="age-check-popup-new__buttons">
						<button
							class="button-circle js-age-check-popup-confirm"
							type="button"
						>
							<span class="button__text">
								{{- button_label -}}
							</span>

							<span class="button-new__icon-container">
								<span class="button-new__icon-wrapper">
									{% render "icons-new", icon: "wave", section_id: 'asdasdsa' %}
								</span>
							</span>
						</button>

						{% if button_close_label != blank %}
							<button
								type="button"
								class="button-link-new age-check-popup-new__close-button focus-visible-outline"
								data-target="age-check-popup"
								data-js-toggle="AgeCheckPopupToggle"
							>
								{{- button_close_label -}}

								<span class="button-link-new__icon-wrapper">
									<span class="button-link-new__icon">
										{% render 'icons-new', icon: 'arrow-right' %}
									</span>
								</span>
							</button>
						{% endif %}
					</div>
				{% endif %}
			</div>
		</div>

		<button type="button"
				class="age-check-popup-new__close-icon-button"
				aria-label="{{- 'general.accessibility.close_modal' | t | escape -}}"
				data-target="age-check-popup"
				data-js-toggle="AgeCheckPopupToggle"
		>
			{% render 'icons-small', icon: 'close' %}
		</button>
	</div>
</div>
