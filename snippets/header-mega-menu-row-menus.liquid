{%- comment -%}
	------------------------------------------------------------------------------
	Snippet: Header mega menu row menus
	Render header mega menu row menus
	- menu: Menu object (required)
	- blocks: blocks object using for output media content.
	- enable_mega_menu_borders: option to show/hide borders in mega menu

	Usage:
	{%- render 'header-mega-menu-row-menus', menu: first_level_link, megamenu_object: megamenu_object, enable_mega_menu_borders: enable_mega_menu_borders -%}
	------------------------------------------------------------------------------
{%- endcomment -%}

{%- assign design 			= settings.design -%}

{% assign menu_links_count 	= menu.links.size %}

{%- capture classes -%}
	{%- if design == 'alternate' -%}
		header-mega-menu-new header-mega-menu-new--row-menus
	{%- else -%}
		header-mega-menu header-mega-menu--row-menus
	{%- endif -%}
{%- endcapture -%}

<div
	id="headerMegaMenu:{{- menu.title | handleize -}}"
	class="{{- classes }} is-hidden js-header-mega-menu"
>
	<span class="visually-hidden">
		{{- "layout.navigation.mega_menu" | t -}}
	</span>

	<div class="header-mega-menu__container js-header-mega-menu-content">
		<div class="header-mega-menu__block header-mega-menu__block--menu header-mega-menu__block--menu-rows header-mega-menu__block--menu-rows-no-image">
			<ul class="header-mega-menu__menu">
				{%- for main_link in menu.links -%}
					<li class="header-mega-menu__menu-item-wrapper header-mega-menu__menu-item-wrapper--parent">
						{%- if main_link.links != blank -%}
							{%- if main_link.url != '#' -%}
								<a
									href="{{- main_link.url -}}"
									class="header-mega-menu__menu-item header-mega-menu__menu-item--parent"
									{% if main_link.current %}
										aria-current="page"
									{% endif %}
								>
									<span class="header-mega-menu__menu-item-text">
										{{- main_link.title | escape -}}
									</span>
								</a>
							{%- else -%}
								<h3
									class="header-mega-menu__menu-item header-mega-menu__menu-item--parent"
								>
									<span class="header-mega-menu__menu-item-text">
										{{- main_link.title | escape -}}
									</span>
								</h3>
							{% endif %}

							<ul
								class="header-mega-menu__menu header-mega-menu__menu--nested is-active"
							>
								{%- for link in main_link.links -%}
									<li class="header-mega-menu__menu-item-wrapper">
										<a
											class="header-mega-menu__menu-item"
											href="{{- link.url -}}"
											{% if link.current %}
												aria-current="page"
											{% endif %}
										>
									<span class="header-mega-menu__menu-item-text">
										{{- link.title | escape -}}
									</span>
										</a>
									</li>
								{%- endfor -%}
							</ul>
						{%- else -%}
							<a
								class="header-mega-menu__menu-item header-mega-menu__menu-item--parent"
								href="{{- main_link.url -}}"
								{% if main_link.current %}
									aria-current="page"
								{% endif %}
							>
								<span class="header-mega-menu__menu-item-text">
									{{- main_link.title | escape -}}
								</span>
							</a>
						{%- endif -%}
					</li>

					{%- if design == 'alternate' and enable_mega_menu_borders -%}
						{%- assign index = forloop.index -%}
						{%- render 'header-mega-menu-row-separator', index: index, position: 6, count: menu_links_count -%}
						{%- render 'header-mega-menu-row-separator', index: index, position: 5, count: menu_links_count -%}
					{%- endif -%}
				{%- endfor -%}
			</ul>
		</div>
	</div>

	<div class="header-mega-menu__overlay js-mega-menu-overlay"></div>
</div>
