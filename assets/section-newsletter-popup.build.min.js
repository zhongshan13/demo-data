!function(){"use strict";const e={newsletterPopup:"NewsletterPopup",newsletterPopupToggle:"NewsletterPopupToggle",newsletterPopupFormInput:"newsletter-popup-contact-form-input",form:"newsletter-popup-contact-form",input:".js-newsletter-popup-input"},t={posted:"posted"};var o=()=>{const o=window.themeCore.utils.Toggle,n=window.themeCore.utils.on,r=window.themeCore.utils.setCookie,s=window.themeCore.utils.getCookie,i=window.themeCore.utils.cssClasses;let p,l,u,w;function c(){let t=window.location.pathname.includes("challenge");s("newsletter_popup")||t||window.themeCore.ageCheckPopupOpen||(w||(w=o({toggleSelector:e.newsletterPopupToggle})).init(),w.open(p),n("click",p,function(e){e.target==this&&w.close(p)}),window.themeCore.EventBus.listen(`Toggle:${e.newsletterPopupToggle}:close`,()=>{m()}),d()&&m(),function(){const e=new URLSearchParams(window.location.search).get("customer_posted");return!window.location.hash||"#newsletter-popup-contact-form"===window.location.hash||"true"===e}()&&(p.classList.add(i.current),u&&u.focus()))}function d(){let o=document.getElementById(e.newsletterPopupFormInput);return!(!o||!o.classList.contains(t.posted))}function m(){if(!p.hasAttribute("data-cookie-time"))return;let e=p.dataset.cookieTime;r("newsletter_popup","1",{"max-age":24*e*60*60})}return Object.freeze({init:function(){if(p=document.getElementById(e.newsletterPopup),l=document.getElementById(e.form),u=document.querySelector(e.input),!p||!l||!u)return!1;let t=d()?0:6e3;setTimeout(c,t),window.themeCore.EventBus.listen("create:newsletter:popup",()=>{setTimeout(c,t)})}})};const n=()=>{window.themeCore.NewsletterPopup=window.themeCore.NewsletterPopup||o(),window.themeCore.utils.register(window.themeCore.NewsletterPopup,"newsletter-popup")};window.themeCore&&window.themeCore.loaded?n():document.addEventListener("theme:all:loaded",n,{once:!0})}();