!function(){"use strict";customElements.get("pickup-availability")||customElements.define("pickup-availability",class extends HTMLElement{constructor(){if(super(),this.hasAttribute("available")){this.errorHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability=this.fetchAvailability.bind(this),this.initEventListeners();try{this.fetchAvailability(this.dataset.variantId)}catch(t){}}}initEventListeners(){document.addEventListener("theme:all:loaded",()=>{this.fetchAvailability(this.dataset.variantId)})}fetchAvailability(t){const e=this.dataset.sectionId;let i=this.dataset.rootUrl;i.endsWith("/")||(i+="/"),fetch(`${i}variants/${t}/?section_id=pickup-availability`).then(t=>t.text()).then(t=>{const i=(new DOMParser).parseFromString(t,"text/html").querySelector(".shopify-section");this.renderPreview(i,e)}).catch(()=>{const t=this.querySelector("button");t&&t.removeEventListener("click",this.onClickRefreshList),this.renderError()})}onClickRefreshList(){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML="",this.appendChild(this.errorHtml),this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(t,e){const i=t.querySelector("pickup-availability-preview");if(!i)return this.innerHTML="",void this.removeAttribute("available");const a=i.querySelector("[data-js-toggle-selector]");a&&(a.dataset.target+=`__${e}`,a.dataset.jsToggle=a.dataset.target),this.innerHTML=i.outerHTML,this.setAttribute("available","");const s=t.querySelector("pickup-availability-drawer");if(s){s.id+=`__${e}`;const t=s.querySelector("[data-js-toggle-selector]");t&&(t.dataset.target+=`__${e}`,t.dataset.jsToggle=t.dataset.target);const i=document.querySelector(`pickup-availability-drawer#productAvailability-pickup-availability__${this.dataset.sectionId}`);i?i.outerHTML=s.outerHTML:document.body.appendChild(s)}}}),customElements.get("pickup-availability-drawer")||customElements.define("pickup-availability-drawer",class extends HTMLElement{constructor(){super(),window.themeCore.EventBus.emit(`pickup-availability-drawer:${this.id}:loaded`)}})}();