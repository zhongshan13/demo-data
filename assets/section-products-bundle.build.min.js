!function(){"use strict";const e={section:".js-products-bundle",button:".js-products-bundle-button",buttonText:".js-products-bundle-button-text",cardButton:".js-product-card-button",hiddenInput:".js-product-card-variant-input",formError:".js-product-card-error",error:".js-product-bundle-error",total:".js-product-total",totalPrice:".js-product-total-price",amount:"[data-amount]",card:".js-product-card",isCurrencyEnabled:"[data-currency-code-enabled]"},t={amount:"data-amount"};var o=()=>{let o,r,n;function c(r){const c=r.querySelectorAll(e.total),u=r.querySelectorAll(e.totalPrice),d=function(o){const r=[...o.querySelectorAll(e.card)].map(o=>{const r=o.querySelector(e.amount),n=o.querySelector(e.hiddenInput);return r&&n&&n.getAttribute("value")&&r.getAttribute(t.amount)||null});if(r.includes(null))return null;return r.reduce((e,t)=>e+=+t,0)}(r);c.length&&u.length&&(c.forEach(e=>{e.classList.toggle(o.active,null!==d)}),null!==d&&u.forEach(e=>{e.innerText=n(d)}))}async function u(t){const o=t.target.closest(e.button);if(!o)return;const r=o.closest(e.section);if(!r)return;const n=r.querySelector(e.error),c=[...r.querySelectorAll(e.hiddenInput)].map(e=>e.value),u=await async function(e){try{return await window.themeCore.CartApi.makeRequest(window.themeCore.CartApi.actions.ADD_TO_CART_MANY,e.map(e=>({id:e,quantity:1}))),""}catch(e){return e.description}}(c);n&&(n.innerHTML=u),!u&&window.themeCore.CartApi.makeRequest(window.themeCore.CartApi.actions.GET_CART)}return Object.freeze({init:async function(t){o=window.themeCore.utils.cssClasses,(r=[...document.querySelectorAll(e.section)].filter(e=>!t||e.closest(`#shopify-section-${t}`))).forEach(t=>(function(t){if(!t)return;const o=t.querySelector(r.isCurrencyEnabled)?window.themeCore.objects.shop.money_with_currency_format:window.themeCore.objects.shop.money_format;n=(e=>window.themeCore.utils.formatMoney(e,o));const d=t.dataset.section,a=t.querySelector(e.button);if(!a)return;const l={enabled:a.dataset.enabledLabel,disabled:a.dataset.disabledLabel};window.themeCore.EventBus.listen("product-card:change-variant",o=>(function({event:t,section:o,sectionId:r,buttonLabels:n}){if(t.sectionId!==r)return;const u=[...o.querySelectorAll(e.hiddenInput)],d=[...o.querySelectorAll(e.formError)],a=u.every(e=>e.value)&&d.every(e=>e.innerText!==window.themeCore.translations.get("products.product.sold_out"));o.querySelectorAll(e.button).forEach(t=>{const o=t.querySelector(e.buttonText);t.disabled=!a,o.innerHTML=n[a?"enabled":"disabled"]}),c(o)})({event:o,section:t,sectionId:d,button:a,buttonLabels:l})),t.addEventListener("click",u),c(t)})(t))}})};const r=()=>{window.themeCore.ProductsBundle=window.themeCore.ProductsBundle||o(),window.themeCore.utils.register(window.themeCore.ProductsBundle,"products-bundle")};window.themeCore&&window.themeCore.loaded?r():document.addEventListener("theme:all:loaded",r,{once:!0})}();