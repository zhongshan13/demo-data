!function(){"use strict";var e=()=>{const e=window.themeCore.utils.cssClasses,t={section:".js-blog",grid:".js-blog-grid",filter:".js-filter",filterLink:".js-filter-link",resetLink:".js-filter-reset",pagination:".js-pagination",paginationLink:".js-pagination-link",infiniteScroll:".js-infinite-scroll",lazyLoad:".js-lazy-load",pageLoader:".js-page-preloader"},i={noEvents:"no-events",...e};let n=document.querySelector(t.section),r=document.querySelector(t.pageLoader),o={grid:n.querySelector(t.grid),filter:n.querySelector(t.filter),filterLinks:[...n.querySelectorAll(t.filterLink)],resetLink:n.querySelector(t.resetLink),pagination:n.querySelector(t.pagination),lazyLoad:n.querySelector(t.lazyLoad),infiniteScroll:n.querySelector(t.infiniteScroll)},a=null;async function s(e){const n=e.target.closest(t.paginationLink);n&&(e.preventDefault(),n.classList.add(i.noEvents),window.scrollTo(0,0),await L(n.href),window.history.pushState({},null,n.href))}async function l(e){const n=e.target.closest(t.filterLink),r=e.target.closest(t.resetLink);if(!n&&!r)return;e.preventDefault();const a=o.filterLinks.find(e=>e.classList.contains(i.active))||o.resetLink;if(n)return n.classList.add(i.noEvents),n.classList.contains(i.active)?(n.classList.remove(i.active),await d(),void n.classList.remove(i.noEvents)):(a.classList.remove(i.active),n.classList.add(i.active),n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),await L(n.href),window.history.pushState({},null,n.href),n.classList.remove(i.noEvents),void o.resetLink.setAttribute("tabindex","0"));r&&!r.classList.contains(i.active)&&(a.classList.remove(i.active),await d())}async function c(e){const n=e.target.closest(t.lazyLoad);if(!n)return;n.classList.add(i.noEvents);const r=window.location.origin+n.dataset.nextUrl;await S(r)}async function d(){o.resetLink.classList.add(i.noEvents,i.active),o.resetLink.setAttribute("tabindex","-1"),await L(o.resetLink.href),window.history.pushState({},null,o.resetLink.href),o.resetLink.classList.remove(i.noEvents)}async function L(e){o.grid.ariaBusy="true",r.classList.add(i.active);const t=f(e,n.id);!function({grid:e,pagination:t,infiniteScroll:i,lazyLoad:n}){if(!(e||t||i||n))return;o.grid.innerHTML=e.innerHTML,v(o.infiniteScroll),w({pagination:t,infiniteScroll:i,lazyLoad:n}),i&&g(i)}(await u(t)),window.themeCore.LazyLoadImages.init(),r.classList.remove(i.active),o.grid.ariaBusy="false"}function f(e,t=n.id){const i=new URL(e);return i.searchParams.set("section_id",t),i.toString()}async function u(e){const i=await fetch(e),n=await i.text(),r=(new DOMParser).parseFromString(n,"text/html");return{grid:r.querySelector(t.grid),pagination:r.querySelector(t.pagination),infiniteScroll:r.querySelector(t.infiniteScroll),lazyLoad:r.querySelector(t.lazyLoad)}}function w(e){if(e&&Object.keys(e).length)for(const t in e)o[t]&&(o[t].replaceWith(e[t]),o[t]=e[t])}async function y(){const e=window.location.href,t=o.filterLinks.find(e=>e.classList.contains(i.active))||o.resetLink,n=o.filterLinks.find(t=>e.includes(t.href))||o.resetLink;t!==n&&t.classList.remove(i.active),await L(e),t!==n&&n.classList.add(i.active)}function g(e){(a=new IntersectionObserver(t=>{t.forEach(async t=>{t.isIntersecting&&await async function(e){v(e);const t=window.location.origin+e.dataset.nextUrl;await S(t)}(e)})},{threshold:.25})).observe(e)}function v(e){e&&a&&a.unobserve(e)}async function S(e){r.classList.add(i.active);const t=f(e,n.id),{grid:a,infiniteScroll:s,lazyLoad:l}=await u(t);o.grid.insertAdjacentHTML("beforeend",a.innerHTML),v(o.infiniteScroll),w({infiniteScroll:s,lazyLoad:l}),s&&g(s),window.themeCore.LazyLoadImages.init(),r.classList.remove(i.active)}return Object.freeze({init:function(){n=document.querySelector(t.section),r=document.querySelector(t.pageLoader),(o={grid:n.querySelector(t.grid),filter:n.querySelector(t.filter),filterLinks:[...n.querySelectorAll(t.filterLink)],resetLink:n.querySelector(t.resetLink),pagination:n.querySelector(t.pagination),lazyLoad:n.querySelector(t.lazyLoad),infiniteScroll:n.querySelector(t.infiniteScroll)}).pagination&&n.addEventListener("click",s),o.filter&&n.addEventListener("click",l),o.lazyLoad&&n.addEventListener("click",c),(o.filter||o.pagination)&&window.addEventListener("popstate",y),o.infiniteScroll&&g(o.infiniteScroll)}})};const t=()=>{window.themeCore.BlogTemplate=window.themeCore.BlogTemplate||e(),window.themeCore.utils.register(window.themeCore.BlogTemplate,"blog-template")};window.themeCore&&window.themeCore.loaded?t():window.themeCore&&window.themeCore.loaded?t():document.addEventListener("theme:all:loaded",t,{once:!0})}();