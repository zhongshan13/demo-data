!function(){"use strict";var t=()=>{let t,n,e,i,a;const s={component:".js-cart-notification",content:".js-cart-notification-content",close:"[data-notification-close]",modal:".js-cart-notification-modal"};let o=null,r=null,c=null,l=!1,d=!1;function p(){o&&(c.focus(),e(c),o.classList.add(a.active),l=!0)}function u(){o&&(o.classList.remove(a.active),l=!1)}function m(t){return!(!r||!t)&&(r.innerHTML=t,!0)}function _(t){if(!t||!t.length)return null;const n=t.reduce((t,n)=>t+n.final_line_price,0),e=t.reduce((t,n)=>t+n.quantity,0),a=t.map(t=>{const n=t.url,e=t.product_title;let a,s,o,r;(t.image||window.themeCore.productPlaceholderImage)&&((a=new URL(t.image||window.themeCore.productPlaceholderImage)).searchParams.set("width","70"),s=a.href,a.searchParams.set("width","140"),o=a.href,!t.image&&window.themeCore.productPlaceholderImageFocal&&(r=`--img-desktop-pos: ${window.themeCore.productPlaceholderImageFocal}`));const c=function(t){if(!t)return null;const n=t.final_price,e=t.original_line_price/t.quantity;return`\n\t\t\t<div class="price ${n<e?"price--on-sale":""}">\n\t\t\t\t<div class="price__container">\n\t\t\t\t\t<div class="price__sale">\n\t\t\t\t\t\t<span class="visually-hidden">\n\t\t\t\t\t\t\t${window.themeCore.translations.get("products.product.price.sale_price")}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class="price-item price-item--sale">\n\t\t\t\t\t\t\t${i(n,window.themeCore.objects.shop.money_format)}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t${n!==e?`\n\t\t\t\t\t\t\t<span class="visually-hidden">\n\t\t\t\t\t\t\t\t${window.themeCore.translations.get("products.product.price.regular_price")}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<span class="price-item price-item--regular">\n\t\t\t\t\t\t\t\t\t${i(e,window.themeCore.objects.shop.money_format)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t`:""}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="price__regular">\n\t\t\t\t\t\t<span class="visually-hidden">\n\t\t\t\t\t\t\t${window.themeCore.translations.get("products.product.price.regular_price")}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class="price-item price-item--regular">\n\t\t\t\t\t\t\t${i(n,window.themeCore.objects.shop.money_format)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t${t.unit_price_measurement?`\n\t\t\t\t\t\t<div class="unit-price">\n\t\t\t\t\t\t\t<span class="visually-hidden">\n\t\t\t\t\t\t\t\t${window.themeCore.translations.get("products.product.price.unit_price")}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<span class="price-item price-item--last">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${i(t.unit_price,window.themeCore.objects.shop.money_format)}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span aria-hidden="true">/</span>\n\n\t\t\t\t\t\t\t\t<span class="visually-hidden">&nbsp;\n\t\t\t\t\t\t\t\t\t${window.themeCore.translations.get("general.accessibility.unit_price_separator")}&nbsp;\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${1!==t.reference_value?`\n\t\t\t\t\t\t\t\t\t\t${t.unit_price_measurement.reference_value}\n\t\t\t\t\t\t\t\t\t`:""}\n\n\t\t\t\t\t\t\t\t\t${t.unit_price_measurement.reference_unit}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`:""}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}(t),l=d?"cart-notification-item-new":"cart-notification-item";return`\n\t\t\t\t<div class="${l}">\n\t\t\t\t\t<a href="${n}" class="focus-visible-outline ${l}__media">\n\t\t\t\t\t\t<div class="${l}__image-wrapper">\n\t\t\t\t\t\t\t${t.image||window.themeCore.productPlaceholderImage?`<img\n\t\t\t\t\t\t\t\t\t\tclass="${l}__image"\n\t\t\t\t\t\t\t\t\t\tsrcset="${s} 1x, ${o} 2x"\n\t\t\t\t\t\t\t\t\t\tsrc="${s}"\n\t\t\t\t\t\t\t\t\t\talt="${e}"\n\t\t\t\t\t\t\t\t\t\t${r?`style="${r}"`:""}\n\t\t\t\t\t\t\t\t\t/>`:""}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\n\t\t\t\t\t<div class="${l}__info">\n\t\t\t\t\t\t<div class="${l}__details">\n\t\t\t\t\t\t\t<a href="${n}" class="focus-visible-outline ${l}__title">\n\t\t\t\t\t\t\t\t${e}\n\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t<div class="${l}__price">\n\t\t\t\t\t\t\t\t${c}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}).join(""),s=d?"cart-notification-summary-new":"cart-notification-summary";return`\n\t\t\t<div class="cart-notification-items">\n\t\t\t\t${a}\n\t\t\t</div>\n\n\t\t\t${`\n\t\t\t<div class="${s}">\n\t\t\t\t<div class="${s}__row ${s}__row--light">\n\t\t\t\t\t<span class="${s}__label">\n\t\t\t\t\t\t${window.themeCore.translations.get(`layout.cart.items_count.${e>1?"other":"one"}`)}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class="${s}__value">\n\t\t\t\t\t\t${e}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="${s}__row">\n\t\t\t\t\t<span class="${s}__label">\n\t\t\t\t\t\t${window.themeCore.translations.get("cart.general.subtotal")}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class="${s}__value">\n\t\t\t\t\t\t${i(n,window.themeCore.objects.shop.money_format)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}\n\t\t`}function w(t){t.target.closest(s.close)&&(t.preventDefault(),u())}function h(t){const n=t.target;n===c||n.closest(s.modal)||u()}function f(t){if(!t||!t.action)return;let n=null,e=[],i=[];switch(t.action){case window.themeCore.CartApi.actions.ADD_TO_CART:case window.themeCore.CartApi.actions.ADD_TO_CART_MANY:e=t.params.filter(t=>!(!t.hasOwnProperty("id")||!t.hasOwnProperty("quantity"))||(Array.isArray(t)?t.every(t=>t.hasOwnProperty("id")&&t.hasOwnProperty("quantity")):void 0)).flatMap(t=>t),n=_(i=t.items.map(t=>{const n=t.quantity,i=e.find(n=>n.id===t.id);return i&&(t.quantity=i.quantity,t.final_line_price=t.final_line_price/n*t.quantity,t.original_line_price=t.original_line_price/n*t.quantity,t.line_price=t.line_price/n*t.quantity),t}))}n&&(m(n),p())}return Object.freeze({init:function(){t=window.themeCore.utils.cssClasses,n=window.themeCore.utils.on,e=window.themeCore.utils.trapFocus,i=window.themeCore.utils.formatMoney,a={...t},d=document.body.classList.contains(a.designAlternate),(o=document.querySelector(s.component))&&(r=o.querySelector(s.content),c=o.querySelector(s.modal),n("click",o,w),n("click",h),window.themeCore.EventBus.listen("cart:updated",f))},open:p,close:u,addNotification:m,isOpen:function(){return l}})};const n=()=>{window.themeCore.CartNotification=window.themeCore.CartNotification||t(),window.themeCore.utils.register(window.themeCore.CartNotification,"cart-notification")};window.themeCore&&window.themeCore.loaded?n():document.addEventListener("theme:all:loaded",n,{once:!0})}();