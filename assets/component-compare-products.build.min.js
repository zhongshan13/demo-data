!function(){"use strict";var t=()=>{const t={addButton:".js-compare-products-button",productButton:".js-compare-products-popup-button",stickyAddToCart:".js-sticky-add-to-cart",compareProductCard:".js-compare-product",compareProducts:".js-compare-products",modal:"compare-products",compareProductRow:".js-product-compare-row",removeButton:".js-product-compare-remove",clearButton:".js-compare-products-clear"},e={product:"data-product-handle",productTitle:"data-product-title",ariaLabel:"aria-label",count:"data-count",empty:"data-empty"},o=6,r='\n\t\t<svg class="icon" aria-hidden="true" focusable="false" width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<rect x="12.8594" y="15.4238" width="2.85714" height="40" rx="0.5" transform="rotate(-45 12.8594 15.4238)" fill="currentColor"/>\n\t\t\t<rect x="15.7109" y="43.9961" width="2.85714" height="40" rx="0.5" transform="rotate(-135 15.7109 43.9961)" fill="currentColor"/>\n\t\t</svg>\n\t',c='\n\t\t<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z"></path>\n\t\t</svg>\n\t',n={...window.themeCore.utils.cssClasses,bigPadding:"big-padding"};let a,d,s,i,u,l,p;function m(){d={add:window.themeCore.translations.get("products.compare_products.product_button_add"),remove:window.themeCore.translations.get("products.compare_products.product_button_remove"),error:window.themeCore.translations.get("products.compare_products.quantity_error")},s=window.themeCore.utils.overlay,i=window.themeCore.utils.Toggle;const o=[...document.querySelectorAll(t.addButton)];if(!o.length)return;const r=w();o.forEach(t=>{const o=t.getAttribute(e.product);if(!o)return;const c=t.getAttribute(e.productTitle);if(c){const n=d[r.includes(o)?"remove":"add"].replaceAll("{{ product }}",c);t.setAttribute(e.ariaLabel,n)}t.classList.toggle(n.active,r.includes(o)),t.classList.remove(n.hidden)}),a.setAttribute(e.count,r.length)}function w(){const t=localStorage.getItem("theme-compare-products");if(!t)return[];try{return JSON.parse(t)}catch(t){return[]}}function h(t){t&&(t.length>o?setTimeout(()=>{const t=window.themeCore.CartNotificationError;t.addNotification(d.error,window.themeCore.translations.get("products.compare_products.quantity_error_heading")),t.open()}):(localStorage.setItem("theme-compare-products",JSON.stringify(t)),m()))}function g(o){const r=o.target.closest(t.addButton);if(!r)return;const c=r.getAttribute(e.product);c&&function(t){let e=w();h(e=e.includes(t)?e.filter(e=>e!==t):[...e,t])}(c)}function f(o){const r=o.target.closest(t.removeButton),c=o.target.closest(t.clearButton);if(!r&&!c)return;if(c)return h([]),void l.close(u);const n=r.getAttribute(e.product);if(!n)return;!function(t){let e=w();h(e=e.filter(e=>e!==t))}(n);const a=w().length,d=document.querySelector(t.compareProducts);if(d){if(a<2)return void l.close(u);[...d.querySelectorAll(`[${e.product}="${n}"]`)].forEach(t=>t.remove()),d.style=`--compare-products-count: ${a}`}}async function y(){const o=w().length;a.disabled=!0,s({namespace:"compare-products-preloader"}).open(!0);const n=await async function(){const e=w();try{return await Promise.all(e.map(e=>(async function(e){const o=`${window.Shopify.routes.root}products/${e}?view=compare`;return await async function(t,e){try{const o=await fetch(t),r=await o.text();let c=(new DOMParser).parseFromString(r,"text/html");return e&&(c=c.querySelector(e)),c}catch(t){console.log(t)}}(o,t.compareProductCard)})(e)))}catch(t){console.log(t)}}();(u=function(o){const n=document.createElement("html");n.innerHTML=o.map(t=>t.outerHTML).join(" ");let a=Array.from(Array(11)).map((e,o)=>[...n.querySelectorAll(`${t.compareProductRow}[data-index="${o+1}"]`)]);a=a.filter(t=>!t.every(t=>t.hasAttribute(e.empty)));const d=document.createElement("html"),s=p?"compare-products-new":"compare-products",i=p?"compare-product-card-new":"compare-product-card",u=p?r:c;return d.innerHTML=`\n\t\t\t<div\n\t\t\t\tclass="modal ${s} js-compare-products"\n\t\t\t\tid="compare-products"\n\t\t\t\tdata-modal-once="true"\n\t\t\t\ttabindex="-1"\n\t\t\t\taria-modal="true"\n\t\t\t\trole="dialog"\n\t\t\t>\n\t\t\t\t<header class="modal__header compare-products__header">\n\t\t\t\t\t${window.themeCore.compareProductsTitle&&`<h2 class="compare-products__heading ${p?"h4":""}">\n\t\t\t\t\t\t\t${window.themeCore.compareProductsTitle}\n\t\t\t\t\t\t</h2>`}\n\t\t\t\t\t${window.themeCore.translations.get("products.compare_products.clear_all")&&`<button class="compare-products__clear js-compare-products-clear focus-visible-outline">\n\t\t\t\t\t\t${window.themeCore.translations.get("products.compare_products.clear_all")}\n\t\t\t\t\t</button>`}\n\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass="compare-products__close focus-visible-outline"\n\t\t\t\t\t\tdata-target="compare-products"\n\t\t\t\t\t\taria-label="${window.themeCore.translations.get("general.accessibility.close")}"\n\t\t\t\t\t\tdata-js-toggle="compare-products"\n\t\t\t\t\t>\n\t\t\t\t\t\t${u}\n\t\t\t\t\t</button>\n\t\t\t\t</header>\n\n\t\t\t\t<div class="modal__body compare-products__body">\n\t\t\t\t\t<div class="modal__body compare-products__content ${i}">\n\t\t\t\t\t\t${a.map(t=>t.map(t=>t.outerHTML).join("")).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,d.querySelector(t.compareProducts)}(n)).style=`--compare-products-count: ${o}`,document.body.append(u);const d={toggleSelector:t.modal,previouslySelectedElement:a};(l=i(d)).init({once:!0}),l.open(u),setTimeout(()=>u.focus(),50),a.disabled=!1}return Object.freeze({init:function(){a=document.querySelector(t.productButton),p=document.body.classList.contains(n.designAlternate),a&&(document.querySelector(t.stickyAddToCart)&&a.classList.add(n.bigPadding),m(),window.themeCore.EventBus.listen("compare-products:init",m),document.addEventListener("click",g),document.addEventListener("click",f),a.addEventListener("click",y))}})};const e=()=>{window.themeCore.CompareProducts=window.themeCore.CompareProducts||t(),window.themeCore.utils.register(window.themeCore.CompareProducts,"compare-products")};window.themeCore&&window.themeCore.loaded?e():document.addEventListener("theme:all:loaded",e,{once:!0})}();